<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Title</title>
    <link rel="stylesheet" href="assets/layui/css/layui.css"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <style>
        .layer-pay-rstips {
            padding: 25px 25px;
        }

        .layer-pay-rstips > p {
            color: #666;
            font-size: 16px;
        }

        .layer-pay-rstips .layui-btn-fluid {
            margin: 15px 0 0 0;
            border-radius: 0;
        }

        .layer-pay-rstips .layui-btn-primary.layui-btn-fluid {
            background-color: transparent;
            border: 1px solid rgba(111, 121, 122, 0.3);
            box-sizing: border-box;
            color: #727272;
        }
    </style>

</head>
<body>
<!-- header -->
<div class="ew-header">
    <a class="layui-logo" href="index.html">EASY WEB</a>
    <div class="ew-nav-group">
        <div class="nav-toggle"><i class="layui-icon layui-icon-more-vertical"></i></div>
        <ul class="layui-nav" lay-filter="ew-header-nav">
            <li class="layui-nav-item">
                <a lay-href="index.html">首页</a>
            </li>
            <li class="layui-nav-item">
                <a lay-href="index.html#pricing">授权</a>
            </li>
            <li class="layui-nav-item">
                <a lay-href="index.html#guide">指南</a>
            </li>
            <li class="layui-nav-item">
                <a lay-href="index.html#product">产品</a>
            </li>
            <li class="layui-nav-item">
                <a href="doc/" target="_blank">文档</a>
            </li>
            <li class="layui-nav-item no-padding-right">
                <a href="javascript:;">演示<i class="layui-hide-xs">&emsp;</i></a>
                <dl class="layui-nav-child">
                    <dd><a href="https://demo.easyweb.vip/iframe/" target="_blank">iframe版</a></dd>
                    <dd><a href="https://demo.easyweb.vip/spa/" target="_blank">spa单页面版</a></dd>
                    <dd><a href="https://demo.easyweb.vip/pro/" target="_blank">单标签版</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item no-padding-right">
                <a href="javascript:;">管理员<i class="layui-hide-xs">&emsp;</i></a>
                <dl class="layui-nav-child text-center">
                    <dd><a href="info.html">个人中心</a></dd>
                    <dd><a href="order.html">我的订单</a></dd>
                    <dd lay-unselect><a ew-event="psw" data-url="password.html">修改密码</a></dd>
                    <dd lay-unselect><a ew-event="logout" data-url="login.html">退出登录</a></dd>
                </dl>
            </li>
        </ul>
    </div>
</div>

<!-- goods-card -->
<div class="layui-container body-card">
    <div class="layui-card" style="max-width: 750px;margin: 0 auto;">
        <div class="layui-card-header">
            <span class="layui-breadcrumb">
                <a href="index.html">首页</a>
                <a href="index.html#product">全部产品</a>
                <a href="goods.html">产品详情</a>
                <a><cite>确认订单</cite></a>
            </span>
        </div>
        <div class="layui-card-body buy-card">
            <div class="layui-row layui-col-space15 goods-info-group">
                <div class="layui-col-md5 layui-hide-xs">
                    <div class="goods-cover"
                         style="background-image: url('https://www.aiviy.com/wp-content/uploads/2018/10/Aiviy-IOTransfer-img01.jpg');"></div>
                </div>
                <div class="layui-col-md7 goods-info">
                    <h1 class="goods-title">静谧风格个人博客模板</h1>
                    <p class="goods-desc">隔离尘世的喧嚣，不必再寻觅，这款博客模板，正是为你而作</p>
                    <div class="goods-spec-group">
                        <div class="goods-spec-item">
                            <div class="goods-spec-item-title">商品规格：</div>
                            <div class="goods-spec-item-list">
                                <div class="goods-spec-item-text">压缩版</div>
                            </div>
                        </div>
                        <div class="goods-spec-item">
                            <div class="goods-spec-item-title">授权时长：</div>
                            <div class="goods-spec-item-list">
                                <div class="goods-spec-item-text">一年</div>
                            </div>
                        </div>
                    </div>
                    <div class="goods-price-group">
                        <div class="goods-price-label">商品价格：</div>
                        <div class="goods-price-text"><span class="small">￥</span>99.9</div>
                    </div>
                </div>
            </div>
            <h2 class="buy-card-title">可用优惠券</h2>
            <div class="coupon-group">
                <div class="coupon-item" data-money="10">
                    <div class="coupon-item-body">
                        <h3>全品类优惠券</h3>
                        <p>有效期至2019.10.07</p>
                        <div class="coupon-item-price">
                            <div><span class="small">￥</span>10</div>
                            <p>无门槛</p>
                        </div>
                    </div>
                    <p>限商品iframe版配套后端使用</p>
                </div>
                <div class="coupon-item" data-money="20">
                    <div class="coupon-item-body">
                        <h3>全品类优惠券</h3>
                        <p>有效期至2019.10.07</p>
                        <div class="coupon-item-price">
                            <div><span class="small">￥</span>20</div>
                            <p>无门槛</p>
                        </div>
                    </div>
                    <p>限商品iframe版配套后端使用</p>
                </div>
                <!--<div class="ew-state-group" style="padding: 25px 0 35px 0;">
                    <img src="assets/images/error_ic_empty.png" style="height: 90px;">
                    <p>没有可用优惠券</p>
                </div>-->
            </div>
            <h2 class="buy-card-title">选择支付方式</h2>
            <div class="pay-type-group">
                <div class="pay-type-ali active" data-id="alipay">支付宝</div>
                <div class="pay-type-wexin" data-id="wxpay">微信支付</div>
            </div>
            <div class="buy-price-gruop">
                <div>订单总价：<span class="price"><span class="small">￥</span>99.9</span></div>
                <div>支付金额：<span class="price" id="payMoney"><span class="small">￥</span>99.9</span></div>
            </div>
            <div class="buy-btn-group">
                <a href="index.html" class="layui-btn layui-btn-primary layui-btn-lg">返回首页</a>
                <button id="btnPay" class="layui-btn layui-btn-warm layui-btn-lg">立即支付</button>
            </div>
            <div class="text-right layui-text" style="margin-bottom: 15px;">
                授权即代表您同意<a href="copyright.html" style="color: #01aaed;" target="_blank">《EasyWeb后台开发框架授权协议》</a>
            </div>
        </div>
    </div>
</div>

<!-- footer -->
<div class="ew-footer">
    <div class="layui-container">
        <div class="layui-row layui-col-space30">
            <div class="layui-col-md6">
                <h3 class="footer-item-title">技术交流群</h3>
                <p class="img-group">
                    <img src="assets/images/img_qqgroup.png"/>
                    扫码免费加入前后端分离技术交流QQ群，与各位大佬一起交流技术、讨论问题。
                </p>
            </div>
            <div class="layui-col-md4">
                <h3 class="footer-item-title">联系我们</h3>
                <p>
                    <i class="layui-icon layui-icon-login-qq"></i>
                    <a href="http://wpa.qq.com/msgrd?v=3&uin=1543859471&site=qq&menu=yes" target="_blank"
                       title="点击发起聊天">QQ: 1543859471</a>
                </p>
                <p>
                    <i class="layui-icon layui-icon-dialogue"></i>
                    <a href="mailto:whvcse@foxmail.com" title="点击发送邮件">邮箱: whvcse@foxmail.com</a>
                </p>
                <p>
                    <i class="layui-icon layui-icon-website"></i>
                    <a href="https://easyweb.vip">网址: www.easyweb.vip</a>
                </p>
            </div>
            <div class="layui-col-md2">
                <h3 class="footer-item-title">快速通道</h3>
                <p><a href="https://demo.easyweb.vip/theme/" target="_blank">主题生成器</a></p>
                <p><a href="https://www.layui.com/doc/" target="_blank">Layui开发文档</a></p>
                <p><a href="https://fly.layui.com/extend/" target="_blank">Layui扩展组件</a></p>
                <p><a href="https://fly.layui.com/" target="_blank">Layui交流社区</a></p>
            </div>
        </div>
        <div class="footer-copyright">
            <p>Copyright © 2019 www.easyweb.vip. All rights reserved.</p>
            <p>鄂ICP备18024391号</p>
        </div>
    </div>
</div>

<!-- 支付提示 -->
<script type="text/html" id="payRsTips">
    <div class="layer-pay-rstips">
        <p>您是否已经完成了支付呢？</p>
        <div>
            <a href="order.html" class="layui-btn layui-btn-fluid">已完成支付</a>
        </div>
        <div>
            <a href="order.html" class="layui-btn layui-btn-primary layui-btn-fluid">未完成支付</a>
        </div>
    </div>
</script>

<!-- js部分 -->
<script type="text/javascript" src="assets/layui/layui.js"></script>
<script type="text/javascript" src="assets/js/common.js"></script>
<script>
    layui.use(['layer'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;

        // 优惠券点击事件
        var goodsPrice = '99.9';
        $('.coupon-group>.coupon-item').click(function () {
            if ($(this).hasClass('active')) {
                $('.coupon-group>.coupon-item').removeClass('active');
                $('#payMoney').html('<span class="small">￥</span>' + goodsPrice + '</span>');
            } else {
                $('.coupon-group>.coupon-item').removeClass('active');
                $(this).addClass('active');
                var payPrice = numAdd(goodsPrice + '', '-' + $(this).data('money'));
                $('#payMoney').html('<span class="small">￥</span>' + payPrice + '</span>');
            }
        });

        function numAdd(num1/*:String*/, num2/*:String*/) {
            var baseNum, baseNum1, baseNum2;
            try {
                baseNum1 = num1.split(".")[1].length;
            } catch (e) {
                baseNum1 = 0;
            }
            try {
                baseNum2 = num2.split(".")[1].length;
            } catch (e) {
                baseNum2 = 0;
            }
            baseNum = Math.pow(10, Math.max(baseNum1, baseNum2));
            return (num1 * baseNum + num2 * baseNum) / baseNum;
        }

        // 支付方式点击事件
        $('.pay-type-group>div').click(function () {
            $('.pay-type-group>div').removeClass('active');
            $(this).addClass('active');
        });

        // 立即支付
        $('#btnPay').click(function () {
            var $coupon = $('.coupon-group>.coupon-item.active');
            if ($('.coupon-group>.coupon-item').length > 0 && $coupon.length <= 0) {
                layer.confirm('您没有选择优惠券，确定前往支付吗？', {
                    skin: 'layui-layer-admin',
                    shade: .1
                }, function (i) {
                    layer.close(i);
                    doPay();
                });
                return;
            }
            doPay($coupon.data('id'));
        });

        function doPay(userCouponId) {
            layer.open({
                type: 1,
                title: false,
                closeBtn: false,
                shade: .1,
                skin: 'layui-layer-admin',
                content: $('#payRsTips').html()
            });
            window.open($('.pay-type-group>div.active').data('id') == 'alipay' ? 'pay.html' : 'pay_wx.html');
            /*var loadIndex = layer.msg('请求中...', {icon: 16, shade: 0.01, time: false});
            $.post('/order/buy', {
                goodsId: '1',
                specId: '1',
                validityId: '1',
                userCouponId: userCouponId,
                payType: $('.pay-type-group>div.active').data('id')
            }, function (res) {
                if (res.code == 200) {
                    layer.msg(res.msg, {icon: 1, shade: 0.01, time: 1500}, function () {
                        window.open('pay.html' + res.orderNumber);
                        layer.open({
                            type: 1,
                            title: false,
                            closeBtn: false,
                            shade: .1,
                            skin: 'layui-layer-admin',
                            content: $('#payRsTips').html()
                        });
                    });
                } else {
                    layer.close(loadIndex);
                    layer.alert(res.msg, {title: '错误提示', btn: '知道了', shade: .1, skin: 'layui-layer-admin'});
                }
            }, 'json');*/
        }

    });
</script>
</body>
</html>